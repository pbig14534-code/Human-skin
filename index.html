<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <title>Bio-Vision – Analyzer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header">
    <div class="header-left">
      <span class="logo-mark">BV</span>
      <span class="logo-text">Bio-Vision – Analyzer</span>
    </div>
    <nav class="header-nav">
      <a href="#" class="nav-link">About</a>
      <a href="#" class="nav-link">Privacy Policy</a>
    </nav>
  </header>

  <main class="app-main">
    <section class="intro">
      <h1>AI-powered medical image analysis</h1>
      <p class="intro-text">
        Upload a single skin or wound image and analyze it with a 9-class AI model.
        A new image will automatically replace the previous one.
      </p>
    </section>

    <section class="content-grid">
      <!-- Upload card -->
      <div class="card upload-card">
        <h2>Upload image</h2>
        <p class="card-text">Drag and drop an image here, or click to choose a file.</p>

        <div id="dropzone" class="dropzone">
          <div class="dropzone-inner">
            <div class="dropzone-icon">⬆</div>
            <div class="dropzone-text">
              <p>Drag and drop an image here</p>
              <p class="muted">or click to choose (PNG/JPG, ≤ 5MB)</p>
            </div>
          </div>
          <input id="file-input" type="file" accept="image/png,image/jpeg" hidden />
        </div>

        <div class="upload-actions">
          <button id="choose-btn" class="btn btn-secondary">Choose image</button>
          <button id="reset-btn" class="btn btn-ghost" disabled>Reset</button>
        </div>

        <div id="upload-info" class="upload-info muted"></div>

        <div class="analyze-actions">
          <button id="analyze-btn" class="btn btn-primary" disabled>
            Analyze now
          </button>
          <span id="status-text" class="status-text"></span>
        </div>
      </div>

      <!-- Preview + results -->
      <div class="card results-card">
        <h2>Preview &amp; results</h2>

        <div class="preview-wrapper">
          <div class="preview-container">
            <img id="preview-image" alt="Preview" class="preview-image hidden" />
            <img id="heatmap-image" alt="Heatmap overlay" class="heatmap-image hidden" />
            <div id="preview-placeholder" class="preview-placeholder">
              <span class="muted">No image selected yet.</span>
            </div>
          </div>

          <button id="toggle-heatmap-btn" class="btn btn-outline small hidden">
            Show decision heatmap
          </button>
        </div>

        <div id="progress-bar" class="progress hidden">
          <div class="progress-inner"></div>
          <span class="progress-label">Analyzing image…</span>
        </div>

        <div id="results-section" class="results-section hidden">
          <div class="result-main">
            <div>
              <span class="result-label">Predicted class</span>
              <div id="pred-label" class="pred-label-badge">—</div>
            </div>
            <div class="pred-probability">
              <span class="result-label">Confidence</span>
              <span id="pred-prob" class="pred-prob-value">—</span>
            </div>
          </div>

          <div class="uncertainty-row">
            <span class="result-label">Reliability</span>
            <span id="uncertainty-tag" class="uncertainty-tag">—</span>
          </div>

          <div class="topk-section">
            <h3>Top-3 probabilities</h3>
            <div id="topk-list" class="topk-list"></div>
          </div>

          <div class="metrics-grid">
            <div class="metric-card">
              <div class="metric-label">Redness index</div>
              <div id="metric-redness" class="metric-value">—</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">Cyanosis index</div>
              <div id="metric-cyanosis" class="metric-value">—</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">Estimated area (cm²)</div>
              <div id="metric-area" class="metric-value">—</div>
            </div>
          </div>

          <p id="quality-hint" class="quality-hint muted"></p>
        </div>
      </div>
    </section>
  </main>

  <div id="toast-root" class="toast-root"></div>

  <script src="app.js"></script>
</body>
</html>
